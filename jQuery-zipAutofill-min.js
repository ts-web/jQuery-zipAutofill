(function(a){var b={};var c={};var d;var e=function(a,c){var d;b[a]={};for(d in c){if(!c.hasOwnProperty(d))continue;b[a][d]=c[d]}};var f=function(a,c,d){if(a.length==0)return;for(co in b){if(!b.hasOwnProperty(co))continue;if(b[co][a]){c(b[co][a][0],b[co][a][1],co);return}}d()};a.fn.zipAutofill=function(d){var g;var h,i,j;var k,l,m;var n=function(b,c,d){if(k){if(h.is("select")){h.find("option").filter(function(){return a(this).attr("value").toLowerCase()==b.toLowerCase()}).attr("selected",true)}else{h.val(b)}}if(l){if(i.is("select")){i.find("option").filter(function(){return a(this).attr("value").toLowerCase()==c.toLowerCase()}).attr("selected",true)}else{i.val(c)}}if(m){if(j.is("select")){j.find("option").filter(function(){return a(this).attr("value").toLowerCase()==d.toLowerCase()}).attr("selected",true)}else{j.val(d)}}};var o=function(){if(c.cityIndex>=0){h.prop("selectedIndex",c.cityIndex)}else{h.val(c.city)}if(c.stateIndex>=0){i.prop("selectedIndex",c.State)}else{i.val(c.state)}if(c.countryIndex>=0){j.prop("selectedIndex",c.countryIndex)}else{j.val(c.country)}};var p=function(){if(!k){c.city=h.val();if(!isNaN(h.prop("selectedIndex"))){c.cityIndex=h.prop("selectedIndex")}}if(!l){c.state=i.val();if(!isNaN(i.prop("selectedIndex"))){c.stateIndex=i.prop("selectedIndex")}}if(!m){c.country=j.val();if(!isNaN(j.prop("selectedIndex"))){c.countryIndex=j.prop("selectedIndex")}}};d=a.extend({country:"us",dataFolderPath:"data/",dataFilePrefix:"zips-"},d);g=[d.country];for(var q=0,r=g.length;q<r;q++){if(b[g[q]]){}else{a.ajax({url:d.dataFolderPath+d.dataFilePrefix+g[q]+".json",dataType:"json",success:function(){var a=g[q];return function(b){e(a,b)}}()})}}h=d.cityField;i=d.stateField;j=d.countryField;if(h.val()=="")k=true;if(i.val()=="")l=true;if(j.val()=="")m=true;h.change(function(a){if(a.target.value=="")k=true;else k=false});i.change(function(a){if(a.target.value=="")l=true;else l=false});j.change(function(a){if(a.target.value=="")m=true;else m=false});this.keydown(function(a){p()});this.keyup(function(a){f(a.target.value,n,o)})}})(jQuery)