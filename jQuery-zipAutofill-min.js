(function(a){var b={};var c={};var d;var e=function(a,c){var d;b[a]={};for(d in c){if(!c.hasOwnProperty(d))continue;b[a][d]=c[d]}};var f=function(a,c,d){if(a.length==0)return;for(co in b){if(!b.hasOwnProperty(co))continue;if(b[co][a]){c(b[co][a][0],b[co][a][1],co);return}}d()};a.fn.zipAutofill=function(d){var g,h,i;var j,k,l;var m=function(b,c,d){if(j){if(g.is("select")){g.find("option").filter(function(){return a(this).attr("value").toLowerCase()==b.toLowerCase()}).attr("selected",true)}else{g.val(b)}}if(k){if(h.is("select")){h.find("option").filter(function(){return a(this).attr("value").toLowerCase()==c.toLowerCase()}).attr("selected",true)}else{h.val(c)}}if(l){if(i.is("select")){i.find("option").filter(function(){return a(this).attr("value").toLowerCase()==d.toLowerCase()}).attr("selected",true)}else{i.val(d)}}};var n=function(){if(c.cityIndex>=0){g.prop("selectedIndex",c.cityIndex)}else{g.val(c.city)}if(c.stateIndex>=0){h.prop("selectedIndex",c.State)}else{h.val(c.state)}if(c.countryIndex>=0){i.prop("selectedIndex",c.countryIndex)}else{i.val(c.country)}};var o=function(){if(!j){c.city=g.val();if(!isNaN(g.prop("selectedIndex"))){c.cityIndex=g.prop("selectedIndex")}}if(!k){c.state=h.val();if(!isNaN(h.prop("selectedIndex"))){c.stateIndex=h.prop("selectedIndex")}}if(!l){c.country=i.val();if(!isNaN(i.prop("selectedIndex"))){c.countryIndex=i.prop("selectedIndex")}}};d=a.extend({countries:["us"],dataFolderPath:"data/",dataFilePrefix:"zips-"},d);for(var p=0,q=d.countries.length;p<q;p++){if(b[d.countries[p]]){}else{a.ajax({url:d.dataFolderPath+d.dataFilePrefix+d.countries[p]+".json",dataType:"json",success:function(){var a=d.countries[p];return function(b){e(a,b)}}()})}}g=d.cityField;h=d.stateField;i=d.countryField;if(g.val()=="")j=true;if(h.val()=="")k=true;if(i.val()=="")l=true;g.change(function(a){if(a.target.value=="")j=true;else j=false});h.change(function(a){if(a.target.value=="")k=true;else k=false});i.change(function(a){if(a.target.value=="")l=true;else l=false});this.keydown(function(a){o()});this.keyup(function(a){f(a.target.value,m,n)})}})(jQuery)